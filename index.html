<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Gerador de Currículos Profissional</title>

<!-- Firebase compatível para HTML puro -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<!-- html2pdf -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

<style>
body { font-family: Arial, sans-serif; margin:0; padding:0; background:#f0f2f5; color:#333; }
header { background:#4a90e2; color:white; padding:20px; text-align:center; }
main { max-width:900px; margin:20px auto; padding:20px; background:white; border-radius:8px; box-shadow:0 2px 8px rgba(0,0,0,0.1);}
h2 { color:#4a90e2; }
label { display:block; margin-top:10px; font-weight:bold; }
input, textarea, select { width:100%; padding:8px; margin-top:4px; border-radius:4px; border:1px solid #ccc; box-sizing:border-box; }
button { margin-top:15px; padding:10px 20px; background:#4a90e2; color:white; border:none; border-radius:5px; cursor:pointer; font-size:16px; }
button:hover { background:#357ab8; }
#preview { margin-top:20px; padding:15px; border:1px solid #ccc; border-radius:5px; background:#fafafa; }
#preview h3 { margin-top:0; }
#loginStatus { text-align:right; margin-bottom:10px; }

/* Modal Styles */
.modal {
  display: none;
  position: fixed;
  z-index: 1000;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  overflow: auto;
  background-color: rgba(0,0,0,0.6);
}
.modal-content {
  background-color: #fefefe;
  margin: 15% auto;
  padding: 20px;
  border: 1px solid #888;
  width: 80%;
  max-width: 500px;
  border-radius: 8px;
  box-shadow: 0 4px 8px 0 rgba(0,0,0,0.2),0 6px 20px 0 rgba(0,0,0,0.19);
  animation-name: animatetop;
  animation-duration: 0.4s
}
@keyframes animatetop {
  from {top: -300px; opacity: 0}
  to {top: 0; opacity: 1}
}
.close-button {
  color: #aaa;
  float: right;
  font-size: 28px;
  font-weight: bold;
}
.close-button:hover,
.close-button:focus {
  color: black;
  text-decoration: none;
  cursor: pointer;
}
.modal-content h2 {
    margin-top: 0;
}
.modal-content ul {
    list-style: none;
    padding: 0;
}
.modal-content ul li {
    margin-bottom: 10px;
    color: #555;
}
.button-premium {
    background: #f39c12;
    display: block;
    width: 100%;
    text-align: center;
}

/* Toast Notification Styles */
#toast-container {
  position: fixed;
  top: 20px;
  right: 20px;
  z-index: 2000;
  display: flex;
  flex-direction: column;
  gap: 10px;
}
.toast {
  padding: 15px 20px;
  border-radius: 5px;
  color: white;
  font-size: 16px;
  box-shadow: 0 2px 10px rgba(0,0,0,0.2);
  opacity: 0;
  transform: translateX(100%);
  animation: slideIn 0.5s forwards, fadeOut 0.5s 4.5s forwards;
}
@keyframes slideIn {
  to {
    opacity: 1;
    transform: translateX(0);
  }
}
@keyframes fadeOut {
  to {
    opacity: 0;
    transform: translateX(100%);
  }
}
.toast-success {
  background-color: #2ecc71;
}
.toast-error {
  background-color: #e74c3c;
}
.toast-info {
  background-color: #3498db;
}
</style>
</head>
<body>
<div id="toast-container"></div>

<header>
  <h1>Gerador de Currículos Profissional</h1>
</header>

<main>
  <div id="loginStatus">
    <span id="userEmail"></span>
    <button id="loginBtn" onclick="loginGoogle()">Login com Google</button>
    <button id="logoutBtn" onclick="logout()" style="display:none;">Logout</button>
  </div>

  <h2>Preencha seus dados</h2>
  <form id="cvForm">
    <label>Nome</label>
    <input type="text" id="nome" placeholder="Seu nome completo">

    <label>Contato</label>
    <input type="text" id="contato" placeholder="Email, telefone">

    <label>Resumo Profissional</label>
    <textarea id="resumo" rows="3" placeholder="Breve descrição sobre você"></textarea>

    <label>Experiências</label>
    <textarea id="experiencias" rows="4" placeholder="Experiências profissionais separadas por vírgula"></textarea>

    <label>Formação Acadêmica</label>
    <textarea id="formacao" rows="3" placeholder="Cursos, instituições e datas"></textarea>

    <label>Habilidades</label>
    <input type="text" id="habilidades" placeholder="Ex.: Python, Excel, Comunicação">

    <label>Idiomas</label>
    <input type="text" id="idiomas" placeholder="Ex.: Inglês - Avançado, Espanhol - Intermediário">

    <button type="button" onclick="gerarPreview()">Gerar Preview</button>
    <button type="button" onclick="exportarPDF()">Exportar PDF</button>
    <button type="button" onclick="comprarPremium()">Comprar Premium</button>
  </form>

  <div id="preview">
    <h3>Preview do Currículo</h3>
    <p>Preencha os campos e clique em "Gerar Preview" para ver seu currículo aqui.</p>
  </div>
</main>

<script>
// --- Toast Notification Function ---
function showToast(message, type = 'info') {
  const container = document.getElementById('toast-container');

  const toast = document.createElement('div');
  toast.className = `toast toast-${type}`;
  toast.textContent = message;

  container.appendChild(toast);

  // Remove the toast after 5 seconds
  setTimeout(() => {
    toast.remove();
  }, 5000);
}

// Firebase Config com suas chaves
const firebaseConfig = {
  apiKey: "AIzaSyBxkmzxao2HOnGsb2Y2R7W0q9FnYdt8dJE",
  authDomain: "gerador-de-curriculos-online.firebaseapp.com",
  projectId: "gerador-de-curriculos-online",
  storageBucket: "gerador-de-curriculos-online.firebasestorage.app",
  messagingSenderId: "114021870709",
  appId: "1:114021870709:web:f73b2d837bb4b5dd7adc3c",
  measurementId: "G-HLWH9KSK0B"
};

// Inicializar Firebase
firebase.initializeApp(firebaseConfig);
const auth = firebase.auth();
const db = firebase.firestore();

// Login Google
function loginGoogle() {
  const provider = new firebase.auth.GoogleAuthProvider();
  auth.signInWithPopup(provider)
    .then(result => {
      document.getElementById('userEmail').innerText = result.user.email;
      document.getElementById('loginBtn').style.display = 'none';
      document.getElementById('logoutBtn').style.display = 'inline';
      showToast(`Bem-vindo, ${result.user.email}!`, 'success');
    })
    .catch(error => showToast(error.message, 'error'));
}

function logout() {
  auth.signOut().then(() => {
    document.getElementById('userEmail').innerText = '';
    document.getElementById('loginBtn').style.display = 'inline';
    document.getElementById('logoutBtn').style.display = 'none';
  });
}

// Monitor login status
auth.onAuthStateChanged(user => {
  if(user){
    document.getElementById('userEmail').innerText = user.email;
    document.getElementById('loginBtn').style.display = 'none';
    document.getElementById('logoutBtn').style.display = 'inline';
  } else {
    document.getElementById('userEmail').innerText = '';
    document.getElementById('loginBtn').style.display = 'inline';
    document.getElementById('logoutBtn').style.display = 'none';
  }
});

// Gerar Preview
function gerarPreview() {
  const nome = document.getElementById('nome').value;
  const contato = document.getElementById('contato').value;
  const resumo = document.getElementById('resumo').value;
  const experiencias = document.getElementById('experiencias').value.split(',');
  const formacao = document.getElementById('formacao').value.split(',');
  const habilidades = document.getElementById('habilidades').value.split(',');
  const idiomas = document.getElementById('idiomas').value.split(',');

  let html = `<h2>${nome}</h2>`;
  html += `<p><strong>Contato:</strong> ${contato}</p>`;
  html += `<p><strong>Resumo:</strong> ${resumo}</p>`;

  html += `<h3>Experiências</h3><ul>`;
  experiencias.forEach(exp => { if(exp.trim()) html += `<li>${exp.trim()}</li>`; });
  html += `</ul>`;

  html += `<h3>Formação Acadêmica</h3><ul>`;
  formacao.forEach(f => { if(f.trim()) html += `<li>${f.trim()}</li>`; });
  html += `</ul>`;

  html += `<h3>Habilidades</h3><ul>`;
  habilidades.forEach(h => { if(h.trim()) html += `<li>${h.trim()}</li>`; });
  html += `</ul>`;

  html += `<h3>Idiomas</h3><ul>`;
  idiomas.forEach(i => { if(i.trim()) html += `<li>${i.trim()}</li>`; });
  html += `</ul>`;

  document.getElementById('preview').innerHTML = html;
}

// Exportar PDF
function exportarPDF() {
  const element = document.getElementById('preview');
  html2pdf().set({margin:0.5, filename:'curriculo.pdf', html2canvas:{scale:2}}).from(element).save();
}

// Comprar Premium
function comprarPremium() {
  document.getElementById('premiumModal').style.display = 'block';
}

function closePremiumModal() {
  document.getElementById('premiumModal').style.display = 'none';
}

// Check Premium
auth.onAuthStateChanged(user => {
  if(user){
    db.collection('usuarios').doc(user.uid).get()
      .then(doc => {
        if(doc.exists && doc.data().premium){
          showToast("Você é usuário Premium! Modelos extras liberados.", 'info');
          // Aqui você poderia desbloquear recursos extras no site
        }
      });
  }
});
</script>

<!-- Premium Modal -->
<div id="premiumModal" class="modal">
  <div class="modal-content">
    <span class="close-button" onclick="closePremiumModal()">&times;</span>
    <h2>Torne-se Premium!</h2>
    <p>Desbloqueie recursos exclusivos para criar um currículo ainda mais impressionante:</p>
    <ul>
      <li>&#10004; Acesso a todos os templates, incluindo o 'Moderno' e outros designs premium.</li>
      <li>&#10004; Opções avançadas de customização de cores e fontes.</li>
      <li>&#10004; Exportação em alta resolução e sem marca d'água.</li>
      <li>&#10004; Suporte prioritário.</li>
    </ul>
    <button class="button-premium" onclick="showToast('Processo de compra ainda não implementado.', 'info')">Quero ser Premium</button>
  </div>
</div>

</body>
</html>
